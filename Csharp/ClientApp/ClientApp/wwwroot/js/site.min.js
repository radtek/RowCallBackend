(function(n){typeof module=="object"&&typeof module.exports=="object"?module.exports=n(require("jquery")):jQuery?n(jQuery):console.error("no jQuery found!")})(function(n){function h(i){var h={},c,l,y,a,b,p,w,v;if(i&&!i.params&&!i.data)return n.extend(u,i),f=i.enableLogging,r("jQuery.soap - globalConfig updated:",u),u;if(n.extend(h,u,i),f=h.enableLogging,r("jquery.soap - config:",h),t.fallbackDeprecated(h),c=t.processData({data:h.data,name:!h.elementName?h.method:h.elementName,context:h.context,prefix:!!h.namespaceQualifier&&!h.noPrefix?h.namespaceQualifier+":":""}),!h.namespaceQualifier||!h.namespaceURL?!h.namespaceURL||c.attr("xmlns",h.namespaceURL):c.addNamespace(h.namespaceQualifier,h.namespaceURL),!c||!h.url)return w=new n.Deferred,c||(v="jquery.soap - no soapObject"),h.url||(v="jquery.soap - no url"),!v||(o(v),w.reject(v)),w.promise();if(l=new s(c),h.envAttributes)for(y in h.envAttributes)l.addAttribute(y,h.envAttributes[y]);if(!!h.SOAPHeader&&(a=t.processData({data:h.SOAPHeader,name:"temp",prefix:""}),!!a))if(a.hasChildren())for(b in a.children)l.addHeader(a.children[b]);else l.addHeader(a);return!h.wss||(p=t.createWSS(h.wss),!p||l.addHeader(p)),!h.appendMethodToURL||!h.method||(h.url+=h.method),l.send({url:h.url,context:h.context,timeout:h.timeout,async:h.async,headers:h.HTTPHeaders?h.HTTPHeaders:{},action:!h.SOAPAction?h.method:h.SOAPAction,soap12:h.soap12,beforeSend:h.beforeSend,statusCode:h.statusCode}).done(function(t,i,u){var f=new e(i,u);r("jquery.soap - receive:",f.toString());n.isFunction(h.success)&&h.success.call(this,f)}).fail(function(t,i,u){r("jquery.soap - error:",u);n.isFunction(h.error)&&h.error.call(this,new e(i,t))})}function s(n){var e,i,r,c,u,o,f,s,h;if(this.typeOf="SOAPEnvelope",this.prefix="soap",this.soapConfig=null,this.attributes={},this.headers=[],this.bodies=[],e=n.name.split(":"),e[1]==="Envelope"||e[1]==="Body"){if(this.prefix=e[0],n.attr("xmlns:"+this.prefix)===t.SOAP11.namespaceURL&&(this.soapConfig=this.SOAP11),n.attr("xmlns:"+this.prefix)===t.SOAP12.namespaceURL&&(this.soapConfig=this.SOAP12),r=n.find(this.prefix+":Envelope"),r&&r.attributes)for(c in r.attributes)this.addAttribute(c,r.attributes[c]);if(u=n.find(this.prefix+":Header"),u&&u.children)for(i=u.children.length,o=0;o<i;o++)this.addHeader(u.children[o]);if(f=n.find(this.prefix+":Body"),f&&f.children)for(i=f.children.length,s=0;s<i;s++)this.addBody(f.children[s]);else for(i=n.children.length,h=0;h<i;h++)this.addBody(n.children[h])}else this.addBody(n)}function r(){f&&typeof console=="object"&&n.isFunction(console.log)&&(arguments.length==1?console.log(arguments[0]):console.log(arguments))}function o(){typeof console=="object"&&n.isFunction(console.warn)&&(arguments.length==1?console.warn(arguments[0]):console.warn(arguments))}var f,u={appendMethodToURL:!0,async:!0,enableLogging:!1,noPrefix:!1,soap12:!1,withCredentials:!1,timeout:5e3},i,e,t;return s.prototype={addAttribute:function(n,t){this.attributes[n]=t},addNamespace:function(n,t){this.addAttribute("xmlns:"+n,t)},addHeader:function(n){this.headers.push(n)},addBody:function(n){this.bodies.push(n)},toString:function(){var n=new i(this.prefix+":Envelope"),t,f,e,r,o,u;for(f in this.attributes)n.attr(f,this.attributes[f]);if(t=this.headers.length,t>0)for(e=n.newChild(this.prefix+":Header"),r=0;r<t;r++)e.appendChild(this.headers[r]);if(t=this.bodies.length,t>0)for(o=n.newChild(this.prefix+":Body"),u=0;u<t;u++)o.appendChild(this.bodies[u]);return n.attr("xmlns:"+this.prefix)||n.addNamespace(this.prefix,this.soapConfig.namespaceURL),n.attr("xmlns:xsi")||n.addNamespace("xsi","http://www.w3.org/2001/XMLSchema-instance"),n.attr("xmlns:xsd")||n.addNamespace("xsd","http://www.w3.org/2001/XMLSchema"),'<?xml version="1.0" encoding="UTF-8"?>'+n.toString()},send:function(i){var f=this,u;return this.soapConfig||(this.soapConfig=i.soap12?t.SOAP12:t.SOAP11),u=this.soapConfig.type,u!==t.SOAP11.type||!i.action||(i.headers.SOAPAction=i.action),r("jquery.soap - beforeSend:",this.toString()),n.ajax({type:"POST",context:i.context,statusCode:i.statusCode,url:i.url,async:i.async,headers:i.headers,timeout:i.timeout,dataType:"xml",processData:!1,data:this.toString(),contentType:u+"; charset=UTF-8"+(i.soap12?"; action="+i.action:""),xhrFields:{withCredentials:i.withCredentials},beforeSend:function(){if(n.isFunction(i.beforeSend))return i.beforeSend.call(i.context,f)}})}},i=function(n){this.typeOf="SOAPObject";this.name=n;this.ns={};this.attributes={};this._parent=null;this.children=[];this.value=undefined},i.prototype={attr:function(n,t){return(!n||!t)&&(!n||t!=="")?n?this.attributes[n]:this.attributes:(this.attributes[n]=t,this)},val:function(n){return n===undefined?this.attr("xsi:nil")==="true"?null:this.value:n===null?(this.attr("xsi:nil","true"),this):(this.value=n,this)},addNamespace:function(n,t){return this.ns[n]=t,this},appendChild:function(n){return n._parent=this,this.children.push(n),n},newChild:function(n){var t=new i(n);return this.appendChild(t),t},addParameter:function(n,t){var r=new i(n);return r.val(t),this.appendChild(r),this},hasChildren:function(){return this.children.length>0?!0:!1},find:function(n){var t,r,i;if(this.name===n)return this;for(t=0,r=this.children.length;t<r;t++)if(i=this.children[t].find(n),i)return i},end:function(){return this.parent()},parent:function(){return this._parent},toString:function(){var n=[],i,f,r,e,u;n.push("<"+this.name);for(f in this.ns)n.push(" xmlns:"+f+'="'+this.ns[f]+'"');for(r in this.attributes)typeof this.attributes[r]=="string"&&n.push(" "+r+'="'+t.encodeXmlValue(this.attributes[r])+'"');if(n.push(">"),this.hasChildren())for(e in this.children)u=this.children[e],typeof u=="object"&&u.typeOf==="SOAPObject"&&n.push(u.toString());if(this.value!==undefined){if(typeof this.value=="string")switch(this.value.indexOf("<![CDATA[")){case-1:i=t.encodeXmlValue(this.value);break;case 0:if(this.value.indexOf("]\]>")===this.value.length-3){i=this.value;break}default:i=t.encodeXmlValueWithCDataCheck(this.value)}else typeof this.value=="number"&&(i=this.value.toString());n.push(i)}return n.push("<\/"+this.name+">"),n.join("")}},e=function(i,r){this.typeOf="SOAPResponse";this.status=i;this.headers=r.getAllResponseHeaders().split("\n");this.httpCode=r.status;this.httpText=r.statusText;this.content=r.responseXML===undefined?r.responseText:r.responseXML;this.toString=function(){if(typeof this.content=="string")return this.content;if(n.isXMLDoc(this.content))return t.dom2string(this.content);throw new Error("Unexpected Content: "+n.type(this.content));};this.toXML=function(){return n.isXMLDoc(this.content)?this.content:n.parseXML(this.content)};this.toJSON=function(){if(n.xml2json)return n.xml2json(this.content);o("jQuery.soap - Missing JQuery Plugin 'xml2json', info at: https://github.com/doedje/jquery.soap#dependencies")}},t={SOAP11:{type:"text/xml",namespaceURL:"http://schemas.xmlsoap.org/soap/envelope/"},SOAP12:{type:"application/soap+xml",namespaceURL:"http://www.w3.org/2003/05/soap-envelope"},processData:function(r){var u;return n.type(r.data)==="string"&&/\S/.test(r.data)&&(r.data.indexOf("<")>-1?r.data=n.parseXML(r.data):u=t.json2soap(r.name,r.data,r.prefix)),n.isXMLDoc(r.data)?u=t.dom2soap(r.data.firstChild):n.isArray(r.data)?u=t.array2soap(r):n.isPlainObject(r.data)?u=t.json2soap(r.name,r.data,r.prefix):n.isFunction(r.data)&&(u=r.data.call(r.context,i)),u},encodeXmlValue:function(n){var t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"};return n.replace(/[<>&"']/g,function(n){return t[n]})},encodeXmlValueWithCDataCheck:function(n){for(var i=!1,u=n.split(""),t=[],r=0,f=u.length;r<f;r++)switch(u[r]){case"<":i?t.push("<"):n.substr(r,9)==="<![CDATA["?(t.push("<![CDATA["),r+=8,i=!0):t.push("&lt;");break;case"]":i&&n.substr(r,3)==="]\]>"?(t.push("]\]>"),r+=2,i=!1):t.push("]");break;case">":t.push(i?">":"&gt;");break;case"&":t.push(i?"&":"&amp;");break;case'"':t.push(i?'"':"&quot;");break;case"'":t.push(i?"'":"&apos;");break;default:t.push(u[r])}return t.join("")},json2soap:function(n,t,r,u){var f,e,o,h,s;if(t===null)f=new i(r+n),f.attr("xsi:nil","true");else if(typeof t=="object")if(t.constructor.toString().indexOf("Array")>-1)for(o=0,h=t.length;o<h;o++)e=this.json2soap(n,t[o],r,u),u.appendChild(e);else if(t.constructor.toString().indexOf("String")>-1)f=new i(r+n),f.val(t);else if(t.constructor.toString().indexOf("Date")>-1)f=new i(r+n),f.val(t.toISOString());else{f=new i(r+n);for(s in t)e=this.json2soap(s,t[s],r,f),e&&f.appendChild(e)}else typeof t=="boolean"?(f=new i(r+n),f.val(t?"true":"false")):(f=new i(r+n),f.val(t));return f},dom2soap:function(n){for(var u=new i(n.nodeName),s,o,r,h,f=n.attributes.length,e=0;e<f;e++)s=n.attributes[e],u.attr(s.name,s.value);for(f=n.childNodes.length,o=0;o<f;o++)r=n.childNodes[o],r.nodeType===1&&(h=t.dom2soap(r),u.appendChild(h)),r.nodeType!==3||/^\s+$/.test(r.nodeValue)||u.val(r.nodeValue),r.nodeType===4&&u.val("<![CDATA["+r.nodeValue+"]\]>");return u},array2soap:function(t){var r,e,f,u,o;for(soapObject=new i(t.name),r=0,e=t.data.length;r<e;r++)if(n.isArray(t.data[r]))for(f=soapObject.newChild("soapenc:Array"),f.attr("soapenc:arrayType","xsd:string["+t.data[r].length+"]"),u=0,o=t.data[r].length;u<o;u++)f.newChild("item").attr("type","xsd:string").val(t.data[r][u]).end();else soapObject.newChild("c-gensym"+r).attr("type","xsd:string").val(t.data[r]).end();return soapObject},dom2string:function(n){return typeof XMLSerializer!="undefined"?(new window.XMLSerializer).serializeToString(n):n.xml},createWSS:function(n){if(!!n.username&&!!n.password){var t={security:"wsse:Security",securityNS:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd",usernameToken:"wsse:UsernameToken",usernameTokenNS:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd",username:"wsse:Username",usernameType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd",password:"wsse:Password",passwordType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText",nonce:"wsse:Nonce",nonceType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd",wsuCreated:"wsu:Created",wsuCreatedType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"},r=new i(t.security).addNamespace("wsse",t.securityNS).addNamespace("wsu",t.usernameTokenNS).newChild(t.usernameToken).newChild(t.username).attr("Type",t.usernameType).val(n.username).end().newChild(t.password).attr("Type",t.passwordType).val(n.password).end().end(),u=r.find(t.usernameToken);return!n.nonce||u.newChild(t.nonce).attr("Type",t.nonceType).val(n.nonce),!n.created||u.newChild(t.wsuCreated).attr("Type",t.wsuCreatedType).val(n.created),r}},fallbackDeprecated:function(n){var r={namespaceUrl:"namespaceURL",request:"beforeSend",params:"data"},t,i;for(t in r)i=r[t],n[i]||!n[t]||(o("jquery.soap: "+t+" is deprecated, use "+i+" instead!"),n[i]=n[t],delete n[t])}},n.soap=h});